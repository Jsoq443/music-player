document.addEventListener('DOMContentLoaded', () => {
  const audio = new Audio();
  const playBtn = document.getElementById('play');
  let isPlaying = false;

  // Прямые ссылки на файлы
  const song = {
    title: "360",
    artist: "Charli XCX",
    audioUrl: "https://ваш_логин.github.io/music-player/music/charli_xcx_360.mp3",
    coverUrl: "https://ваш_логин.github.io/music-player/covers/charli_xcx_brat.jpg"
  };

  // Загрузка песни
  function loadSong() {
    document.getElementById('title').textContent = song.title;
    document.getElementById('artist').textContent = song.artist;
    document.getElementById('cover').src = song.coverUrl;
    audio.src = song.audioUrl;
    
    console.log("Пытаюсь загрузить:", audio.src); // Для отладки
  }

  // Контроль воспроизведения
  playBtn.addEventListener('click', () => {
    if (isPlaying) {
      audio.pause();
      playBtn.textContent = '▶';
    } else {
      audio.play()
        .then(() => {
          playBtn.textContent = '⏸';
          console.log("Аудио воспроизводится");
        })
        .catch(error => {
          console.error("Ошибка воспроизведения:", error);
          alert(`Ошибка: ${error.message}. Проверьте консоль (F12)`);
        });
    }
    isPlaying = !isPlaying;
  });

  // Обработчики ошибок
  audio.addEventListener('error', () => {
    console.error("Ошибка аудио:", audio.error);
    alert(`Код ошибки: ${audio.error.code}. Подробности в консоли (F12)`);
  });

  document.getElementById('cover').addEventListener('error', () => {
    console.warn("Обложка не загрузилась");
    document.getElementById('cover').src = 'https://via.placeholder.com/300';
  });

  // Первоначальная загрузка
  loadSong();
});
